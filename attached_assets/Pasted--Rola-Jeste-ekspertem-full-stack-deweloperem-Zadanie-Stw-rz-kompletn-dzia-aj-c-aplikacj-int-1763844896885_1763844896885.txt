 Rola: Jeste ekspertem full-stack deweloperem.

Zadanie: Stw贸rz kompletn, dziaajc aplikacj internetow "Mikoajkowy Losowator". Aplikacja ma pozwoli grupie os贸b wylosowa, kto komu kupuje prezent. System musi by prosty: u偶ytkownicy loguj si tylko swoim imieniem (bez hasa), aby sprawdzi, kogo wylosowali.

Technologie:


Frontend: HTML, CSS, JavaScript (bez framework贸w).

Backend: Node.js z frameworkiem Express.

Baza danych: Prosty plik database.json do przechowywania listy uczestnik贸w i wynik贸w losowania.

Kluczowe Wymagania Logiczne (Backend):

Plik database.json:

Stw贸rz plik database.json.

Musi zawiera dwie g贸wne tablice:

participants: Lista imion wszystkich uczestnik贸w (np. ["Anna", "Marek", "Kasia", "Piotr"]).

results: Lista obiekt贸w przechowujca wyniki. Pocztkowo pusta. Po losowaniu powinna wyglda tak: [ { "drew": "Anna", "drawsFor": "Piotr" }, { ... } ].

Logika Losowania (Najwa偶niejsze!):

Losowanie musi odby si tylko raz dla caej grupy.

Zasady:

Nikt nie mo偶e wylosowa samego siebie.

Ka偶dy musi kogo wylosowa (przypisanie 1-do-1).

Implementacja (Sugerowana): Stw贸rz funkcj performDraw().

Funkcja bierze list participants.

Tworzy "przetasowan" kopi tej listy.

Sprawdza, czy nikt nie wylosowa samego siebie (np. czy participants[i] nie r贸wna si shuffledList[i]).

Jeli kto wylosowa siebie, tasuj list ponownie, a偶 do skutku.

Zapisz wyniki do database.json w formacie { drew: "OsobaA", drawsFor: "OsobaB" }.

Endpoint API: POST /check-result

Ten endpoint przyjmuje w ciele 偶dania (body) obiekt: { "name": "ImiU偶ytkownika" }.

Logika "Smart Draw":

Gdy ten endpoint jest wywoywany, najpierw sprawd藕, czy tablica results w database.json jest pusta.

Jeli jest pusta: Uruchom funkcj performDraw(), aby wygenerowa i zapisa wyniki dla wszystkich uczestnik贸w.

Jeli nie jest pusta: (tzn. losowanie ju偶 si odbyo), przejd藕 dalej.

Weryfikacja u偶ytkownika: Sprawd藕, czy podane imi (name) znajduje si na licie participants.

Jeli nie: Zwr贸 bd (np. 404) z komunikatem: "Nie ma Ci na licie uczestnik贸w."

Zwracanie wyniku: Znajd藕 w tablicy results obiekt, gdzie drew pasuje do podanego imienia.

Zwr贸 JSON z wynikiem, np.: { "drawsFor": "Marek" }.

Wymagania (Frontend):

Plik index.html (Strona logowania):

Nag贸wek, np. "Mikoajkowy Losowator ".

Formularz (<form>) zawierajcy:

Pole tekstowe (<input type="text">) z etykiet "Wpisz swoje imi".

Przycisk (<button type="submit">) "Sprawd藕, kogo wylosowae!".

Pusty kontener (<div>) na wywietlenie wyniku lub bdu (np. <div id="result-container"></div>).

Plik style.css:

Dodaj proste, estetyczne style. Wyrodkuj zawarto, nadaj adny wygld formularzowi i przyciskowi. U偶yj witecznych kolor贸w (czerwony, zielony, biay).

Logika JavaScript (w index.html lub osobnym main.js):

Obsu偶 zdarzenie submit formularza (przechwytujc je, by strona si nie przeadowaa).

Pobierz imi z pola tekstowego.

Wykonaj 偶danie fetch typu POST do endpointu /check-result na swoim serwerze, wysyajc imi w formacie JSON.

Obsuga odpowiedzi:

Jeli sukces (status 200): Odbierz dane (np. data.drawsFor) i wywietl je w #result-container. Np. "Cze [Imi]! W tym roku kupujesz prezent dla: [WylosowanaOsoba]!".

Jeli bd (np. 404): Odbierz komunikat bdu i wywietl go w #result-container. Np. "Bd: Nie ma Ci na licie uczestnik贸w."

Instrukcja kocowa:

Wygeneruj prosz kompletny kod dla plik贸w: server.js, package.json (z zale偶nociami express), database.json (z 4-5 przykadowymi imionami w participants i pust tablic results), index.html oraz style.css. Upewnij si, 偶e kod jest gotowy do uruchomienia (po wykonaniu npm install i node server.js). 